jenkins:
  systemMessage: "Jenkins configured automatically by Configuration as Code plugin"
  
  # Global security settings
  globalNodeProperties:
    - envVars:
        env:
          - key: "JAVA_HOME"
            value: "/opt/java/openjdk"
          - key: "PATH"
            value: "$PATH:/opt/java/openjdk/bin"

  # Security realm
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "admin"
          password: "${JENKINS_ADMIN_PASSWORD:-admin123}"
          properties:
            - "hudson.security.HudsonPrivateSecurityRealm$Details":
                passwordHash: "${JENKINS_ADMIN_PASSWORD_HASH}"

  # Authorization strategy
  authorizationStrategy:
    globalMatrix:
      permissions:
        - "Overall/Administer:admin"
        - "Overall/Read:authenticated"

  # Global tool configuration
  tool:
    git:
      installations:
        - name: "Default"
          home: "/usr/bin/git"
    
    maven:
      installations:
        - name: "Maven-3.9"
          properties:
            - installSource:
                installers:
                  - maven:
                      id: "3.9.5"

    dockerTool:
      installations:
        - name: "Docker"
          properties:
            - installSource:
                installers:
                  - fromDocker:
                      version: "latest"

# Global security configuration
security:
  # Prevent Cross Site Request Forgery exploits
  crumbIssuer:
    standard:
      excludeClientIPFromCrumb: false

  # Global security settings
  globalJobDslSecurityConfiguration:
    useScriptSecurity: true

# Unclassified configuration
unclassified:
  # Location configuration
  location:
    adminAddress: "admin@company.com"
    url: "http://jenkins:8080/"

  # Global libraries configuration
  globalLibraries:
    libraries:
      - name: "shared-library"
        defaultVersion: "main"
        retriever:
          modernSCM:
            scm:
              git:
                remote: "https://github.com/company/jenkins-shared-library.git"
